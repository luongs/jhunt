<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>Phaser - Making your first game, part 1</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

// Phaser.AUTO will try to run webgl if possible or canvas otherwiae
var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });

function preload() {
    // load assets
    // first param is key and will be used elsewhere in code
    game.load.image('sky','assets/sky.png');
    game.load.image('ground','assets/platform.png');
    game.load.image('star','assets/star.png');
    game.load.spritesheet('dude','assets/dude.png',32,48);
}

function create() {
  // Add physics
  game.physics.startSystem(Phaser.Physics.ARCADE);
  /* BACKGROUND */
  game.add.sprite(0,0,'sky');
  // Platform contains gound and 2 ledges
  var platforms = game.add.group();
  // enable physics for any body created in group
  platforms.enableBody = true;
  
  // Groups place similar objects together
  var ground = platforms.create(0, game.world.height - 64, 'ground');
  // fit width of game
  ground.scale.setTo(2,2);
  // set immovable property from being affected by physics
  ground.body.immovable = true;

  var ledge = platforms.create(400,400, 'ground');
  ledge.body.immovable = true;
  ledge = platforms.create(-150,250,'ground');
  ledge.body.immovable = true;

  /* PLAYER */
  var player = game.add.sprite(32,game.world.height - 150, 'dude');
  game.physics.arcade.enable(player);

  // give player some bounce 
  player.body.bounce.y = 0.2;
  player.body.gravity.y = 300;
  player.body.collideWorldBounds = true;
  
  var LEFT_ANIMATIONS = [0,1,2,3];
  var RIGHT_ANIMATIONS = [5,6,7,8];
  var FRAME_PER_SECOND = 10;
  var LOOP = true;
  // animations
  player.animations.add('left', LEFT_ANIMATIONS, FRAME_PER_SECOND, LOOP);
  player.animations.add('right', RIGHT_ANIMATIONS, FRAME_PER_SECOND, LOOP);
}

function update() {
}

</script>

</body>
</html>
